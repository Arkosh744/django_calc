{% extends 'base.html' %}
{% load static %}


{% block header %}
    <title>Калькулятор вальцовки</title>
    <link rel="stylesheet" href="{% static 'css/style_page.css' %}">
    <link rel="stylesheet" href="{% static 'css/style_thermal.css' %}">
{% endblock %}

{% block content %}
    <section class="wrapper flex-grow-1">
        <div class="parent py-5">
            <div class="div1 card shadow-sm">
                <h2>{{ _("Исходные данные") }}</h2>
                <form action="" method="post" autocomplete="off" id="submit-form">
                    {% csrf_token %}
                    {{ html_form }}
                    <div class="form--zones_table input-group input-group-sm mb-3">
                        <table id="table-zones" class="table-zones">
                            <thead>
                            <tr>
                                <th class="td-zone">№</th>
                                <th class="td-zone">{{ html_form_zones.zone_time_1.label }}</th>
                                <th class="td-zone">{{ html_form_zones.temp_air_1.label }}</th>
                                <th class="td-zone">{{ html_form_zones.temp_bottom_1.label }}</th>
                            </tr>
                            </thead>
                            <tr>
                                <td class="td-zone_1">1</td>
                                <td class="td-zone_1">
                                    {{ html_form_zones.zone_time_1 }}
                                </td>
                                <td class="td-zone_1">
                                    {{ html_form_zones.temp_air_1 }}
                                </td>
                                <td class="td-zone_1">
                                    {{ html_form_zones.thermal_coef_1_bottom }}
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="form--zones_table input-group input-group-sm mb-3">
                        <table id="table-zones" class="table-zones">
                            <thead>
                            <tr>
                                <th class="td-zone">№</th>
                                <th class="td-zone">{{ html_form_zones.thermal_coef_1.label }}</th>
                                <th class="td-zone">{{ html_form_zones.thermal_coef_1_bottom.label }}</th>
                            </tr>
                            </thead>
                            <tr>
                                <td class="td-zone_1">1</td>
                                <td class="td-zone_1">
                                    {{ html_form_zones.thermal_coef_1 }}
                                </td>
                                <td class="td-zone_1">
                                    {{ html_form_zones.thermal_coef_1_bottom }}
                                </td>
                            </tr>
                        </table>
                    </div>

                    <details>
                        <summary>{{ _('Продвинутые настройки') }}</summary>
                        <div class="form--thickness_layers">
                        </div>
                        <div class="form--time_step">
                        </div>
                    </details>
                    <button class="btn btn-calc btn-primary" type="submit" value="calc" name="calc"
                            id="submit">{{ _("Расчет") }}
                    </button>
                </form>
            </div>
            <div class="div-results card shadow-sm">
                <div class="div2">

                    <h2>{{ _("Результаты расчета") }}</h2>
                    {% if plot %}
                        <div class="chart" id="plotty">
                            <script>
                                var graphs = {{plot | safe}};
                                graphs.config = {
                                    displayModeBar: true,
                                    displaylogo: false,
                                    modeBarButtonsToRemove: ['toImage', 'pan2d', 'zoom2d', 'select2d',
                                        'lasso2d', 'zoomIn2d', 'zoomOut2d', 'autoScale2d'],
                                    showLink: true,
                                    plotlyServerURL: "https://chart-studio.plotly.com",
                                    linkText: '{{ _('Edit Online') }}',
                                    modeBarButtonsToAdd: ['drawline']
                                }
                                Plotly.plot('plotty', graphs, {});
                            </script>
                        </div>
                    {% endif %}

                </div>
                <div class="div3">
                    {% if table %}
                        <h1 align="center" id="table-result">{{ _("Таблица для экспорта") }}</h1>
                        {{ table }}
                        <div>
                            <a download="results.xlsx" class="btn btn-outline-success"
                               onclick="return ExcellentExport.convert({ anchor: this, filename: 'results', format: 'xlsx'},
                       [{name: 'Results', from: {table: 'resultData'}}]);">Export to xlsx</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {#    <script type="text/javascript" src="{{ url_for('static', filename='chemistry.js') }}"></script>#}

    </section>

{% endblock %}